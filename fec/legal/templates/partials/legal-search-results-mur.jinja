<div class="simple-table simple-table--responsive simple-table--display legal-search-results legal-mur data-container__datatable">
  <div class="simple-table__header">
    <div class="simple-table__header-cell cell--10">Case number</div>
    <div class="simple-table__header-cell cell--15">Case name</div>
    <div class="simple-table__header-cell">Case details and documents</div>
  </div>
  <div class="simple-table__row-group">
  {% for mur in murs %}
    <div class="simple-table__row legal-search-result">
      <div class="simple-table__cell">
        <div class="t-sans">
          <span class="t-bold">MUR #{{ mur.no }}</span>
        </div>
        {% if mur.mur_type == 'archived' %}
        <div class="legal-mur__archive"><span class="legal-mur__archive-icon"><span class="u-visually-hidden">Icon representing an archived case</span></span>Archived case</div>
        {% endif %}
      </div>
      <div class="simple-table__cell">
        <div class="t-sans">
          <a title="{{ mur.name }}" href="/data/legal/matter-under-review/{{ mur.no }}">
            {{ mur.name|upper }}
          </a>
        </div>
      </div>
      <div class="simple-table__cell no--pad">
        <div class="u-margin--bottom  u-padding--top--med u-margin--left"><strong>Election cycle(s):</strong> {{ '; '.join(mur['election_cycles'] | map('string') | sort) }}</div>
        {% if mur.mur_type == 'current' %}
        {# Archived MUR subjects are a tree-structure so we don't render them inline #}
          <div class="u-margin--bottom u-margin--left">
            <strong>Subject(s):</strong> {{ '; '.join(mur['subjects']) }}
          </div>
        {% endif %}
        <div class="u-margin--bottom u-margin--left">
          <strong>Disposition(s):</strong>
          {# group disposition by disposition names #}
          {% set disposition_dict = dict() %}
          {% for disposition_record in mur.dispositions %}
             {% set disposition = disposition_record.disposition %}
             {% if( disposition_dict[disposition] ) %}
              {# increment the respondents count for existing dispositions #}
              {% do disposition_dict.update({disposition: disposition_dict[disposition] + 1 }) %}
             {% else %}
               {# set the count to 1 for new dispositions #}
               {% do disposition_dict.update({disposition: 1}) %}
             {% endif %}
          {% endfor %}
          {# for each unique disposition, display the count of respondents/records #}
          {% for disposition in disposition_dict %}
            {{ disposition }} ({{ disposition_dict[disposition] }} respondents);&nbsp;
          {% endfor %}
        </div>
        <div class="legal-search-result__hit u-padding--left--small split__cell">
          {% for document in mur.documents %}
            {% set query_highlight = mur.document_highlights[loop.index0 | string]%}
            {% if(query_highlight) %}
              <div class="post--icon u-padding--top">
                <span class="icon icon--inline--left i-document"></span><a href="{{document.url}}">{{ document.description }}</a>
              </div>
              {# show only first document highlight result #}
              <ul>
                  <li class="post--icon t-serif t-italic u-padding--top">
                    &#8230;{{ query_highlight[0] | safe }}&#8230;
                  </li>
              </ul>
              {# show additional document highlight results, if any #}
              {% if(query_highlight|length > 1) %}
              <div class="js-accordion u-margin--top" data-content-prefix="additional-result-{{ mur.no }}-{{loop.index0}}">
                <button type="button" class="js-accordion-trigger accordion__button results__button" aria-controls="additional-result-{{ mur.no }}-{{loop.index0}}" aria-expanded="false">
                  {% if(query_highlight|length == 2) %}
                    1 more match
                  {% elif(query_highlight|length > 2)  %}
                    {{ query_highlight|length -1 }} more matches
                  {% endif %}
                </button>
                  <div class="accordion__content results__content" aria-hidden="true">
                      <ul>
                        {% for highlight in query_highlight %}
                          {% if(loop.index0 != 0) %}
                            <li class="t-serif t-italic u-padding--bottom">&#8230;{{ highlight | safe }}&#8230;</li>
                          {% endif %}
                        {% endfor %}
                      </ul>
                  </div>
              </div>
              {% endif %}
              <ul class="tags u-padding--bottom">
                <li class="tag__category tag__category--doc">
                  <div class="tag tag--primary">{{ document.category }}</div>
                </li>
              </ul>
              
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
  {% endfor %}
  </div>
</div>
