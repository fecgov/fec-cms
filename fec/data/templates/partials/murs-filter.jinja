{% extends 'partials/filters.jinja' %}
{% import 'macros/filters/text.jinja' as text %}
{% import 'macros/filters/date.jinja' as date %}
{% import 'macros/filters/range.jinja' as range %}
{% import 'macros/filters/keyword-proximity.jinja' as proximity %}
{% import 'macros/legal.jinja' as legal %}
{% import 'macros/filters/checkbox.jinja' as checkbox %}
{% import 'macros/filters/dropdown-json.jinja' as dropdown %}
{% import 'macros/filters/typeahead-filter.jinja' as typeahead %}


{% block filters %}
  <div class="filters__aside">
    <div class="button--notebook u-margin--top t-sans">Use the legal search guide to learn more about <a href="/legal-resources/how-to-use-fec-legal-search-systems/">how to use FEC legal search systems</a>.</div>
  </div>
  <form id="murs-filters" action="">
  <div class="filters__inner">
    {{ text.field('case_no', 'MUR number') }}
    {{ text.field('case_respondents', 'MUR respondents') }}
  </div>
  <div class="js-accordion accordion--neutral" data-content-prefix="filter" data-open-first="true">
    <button type="button" class="js-accordion-trigger accordion__button">Documents</button>
    <div class="accordion__content">
        {{ legal.keyword_search_q(result_type, query) }}
        {{ proximity.field('keyword-proximity', title='Proximity') }}
        {{ checkbox.checkbox_dropdown(
            name='case_doc_category_id',
            label='Document type',
            options=constants.mur_document_categories,
            ) 
        }}
        {{ date.field('document_date', 'Document date range', id_prefix='case_' ) }}
    </div>

    <button type="button" class="js-accordion-trigger accordion__button">Case details</button>
    <div class="accordion__content">
        {{ checkbox.checkbox_dropdown(
            name='mur_disposition_category_id',
            label='Final disposition',
            selected=constants.suggested_mur_disposition_category_ids,
            options=constants.mur_disposition_category_ids,
            ) 
        }}
      {# ===============WORKS AS TWO SEPARATE FITERS =========================#}
{#       {{ dropdown.select_single_flat_list(
        'primary_subject_id',
        'Case subject',
        options=constants.primary_subject_ids,
        data_prefix="Primary subject: "
        ) }}
      {{ dropdown.select_json_indentation(
        'secondary_subject_id',
        'Secondary case subject',
        options=constants.secondary_subject_placeholder,
        default="",
        data_prefix="Secondary subject: "
        ) }} #}
    
{# ===============TRY AS TWO RANGE FITERS =========================#}
{{ dropdown.select_single_flat_list_range('subject_id', 'Case subject', options=constants.primary_subject_ids, hide_help=true, first_opt_no_value_label=false) }}

      <div class="filter">
        <legend class="label">Penalty amount by respondent</legend>
        <div class="range range--currency">
          <div class="range__input range__input--min js-filter" data-filter="range">
            <label for="case_min_penalty_amount">From</label>
            <input id="case_min_penalty_amount" type="text" name="case_min_penalty_amount" data-range="min" data-prefix="$" data-suffix="or more">
          </div>
          <div class="range__hyphen">-</div>
          <div class="range__input range__input--max js-filter" data-filter="range">
            <label for="case_max_penalty_amount">To</label>
            <input id="case_max_penalty_amount" type="text" name="case_max_penalty_amount" data-range="max" data-prefix="$" data-suffix="or less">
          </div>
        </div>
      </div>
{{ date.field('open_date', 'Case open date range', id_prefix='case_' ) }}
{#       <div class="filter">
        <legend class="label">Case open date range</legend>
        <div class="range range--date js-date-range">
          <div class="range__input range__input--min" data-filter="range">
            <label for="case_min_open_date">Beginning</label>
            <input id="case_min_open_date" name="case_min_open_date" placeholder="mm/dd/yyyy">
          </div>
          <div class="range__hyphen">-</div>
          <div class="range__input range__input--max" data-filter="range">
            <label for="case_max_open_date">Ending</label>
            <input id="case_max_open_date" name="case_max_open_date" placeholder="mm/dd/yyyy">
          </div>
        </div>
      </div> #}

    {{ date.field('close_date', 'Case close date range', id_prefix='case_' ) }}

      
      {# <div class="filter">
        <legend class="label">Case close date range</legend>
        <div class="range range--date js-date-range">
          <div class="range__input range__input--min" data-filter="range">
            <label for="case_min_close_date">Beginning</label>
            <input id="case_min_close_date" name="case_min_close_date" placeholder="mm/dd/yyyy">
          </div>
          <div class="range__hyphen">-</div>
          <div class="range__input range__input--max" data-filter="range">
            <label for="case_max_close_date">Ending</label>
            <input id="case_max_close_date" name="case_max_close_date" placeholder="mm/dd/yyyy">
          </div>
        </div>
      </div> #}

    </div>
    
    <button type="button" class="js-accordion-trigger accordion__button">Disposition citations</button>

    <div class="accordion__content">
      <label>If more than one citation is entered:</label>
      <input type="radio" id="case_citation_require_all_false" name="case_citation_require_all" value="false"{% if case_citation_require_all != 'true' %} checked{% endif %}>
      <label for="case_citation_require_all_false">Show cases citing any of them</label>
      <input type="radio" id="case_citation_require_all_true" name="case_citation_require_all" value="true"{% if case_citation_require_all == 'true' %} checked{% endif %}>
      <label for="case_citation_require_all_true">Show cases citing all of them</label>
      {{ typeahead.field('case_regulatory_citation', 'Regulatory citation', False, dataset='caseRegulatoryCitations',
        allow_text=False, show_tooltip_text='Regulatory citation does not search archived cases') }}
      {{ typeahead.field('case_statutory_citation', 'Statutory citation', False, dataset='caseStatutoryCitations',
        allow_text=False, show_tooltip_text='Statutory citation does not search archived cases') }}
    </div>
  </div>
</form>

{% endblock %}
