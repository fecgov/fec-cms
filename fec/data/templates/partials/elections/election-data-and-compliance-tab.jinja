{% import 'macros/cycle-select.jinja' as select %}
{% import 'macros/reporting-info.jinja' as reporting %}
{% set anchors = {
  'AL': {'p':'1', 'ie': 'AL', 'ec': 'AL'},'AK': {'p':'1', 'ie': 'AL', 'ec': 'AL'},'AS': {'p':'1', 'ie': 'AL', 'ec': 'AL'},
  'AZ': {'p':'1', 'ie': 'AZ', 'ec': 'AL'},'AR': {'p':'1', 'ie': 'AZ', 'ec': 'AL'},'CA': {'p':'1', 'ie': 'AZ', 'ec': 'CA'},
  'CO': {'p':'2', 'ie': 'AZ', 'ec': 'CA'},'CT': {'p':'2', 'ie': 'CT', 'ec': 'CA'},'DE': {'p':'2', 'ie': 'DE', 'ec': 'DE'},
  'DC': {'p':'2', 'ie': 'DE', 'ec': 'DE'},'FL': {'p':'2', 'ie': 'DE', 'ec': 'DE'},'GA': {'p':'2', 'ie': 'GA', 'ec': 'DE'},
  'GU': {'p':'3', 'ie': 'GA', 'ec': 'DE'},'HI': {'p':'3', 'ie': 'GA', 'ec': 'DE'},'ID': {'p':'3', 'ie': 'ID', 'ec': 'DE'},
  'IL': {'p':'3', 'ie': 'ID', 'ec': 'DE'},'IN': {'p':'3', 'ie': 'ID', 'ec': 'IN'},'IA': {'p':'3', 'ie': 'ID', 'ec': 'IN'},
  'KS': {'p':'3', 'ie': 'ID', 'ec': 'IN'},'KY': {'p':'3', 'ie': 'KY', 'ec': 'IN'},'LA': {'p':'4', 'ie': 'KY', 'ec': 'IN'},
  'ME': {'p':'4', 'ie': 'KY', 'ec': 'IN'},'MH': {'p':'4', 'ie': 'KY', 'ec': 'IN'},'MD': {'p':'4', 'ie': 'KY', 'ec': 'IN'},
  'MA': {'p':'4', 'ie': 'MA', 'ec': 'MA'},'MI': {'p':'4', 'ie': 'MA', 'ec': 'MA'},'MN': {'p':'4', 'ie': 'MA', 'ec': 'MA'},
  'MS': {'p':'4', 'ie': 'MA', 'ec': 'MA'},'MO': {'p':'4', 'ie': 'MO', 'ec': 'MA'},'MT': {'p':'5', 'ie': 'MO', 'ec': 'MA'},
  'NE': {'p':'5', 'ie': 'MO', 'ec': 'MA'},'NV': {'p':'5', 'ie': 'MO', 'ec': 'MA'},'NH': {'p':'5', 'ie': 'MO', 'ec': 'NH'},
  'NJ': {'p':'5', 'ie': 'MO', 'ec': 'NH'},'NM': {'p':'5', 'ie': 'NM', 'ec': 'NH'},'NY': {'p':'5', 'ie': 'NM', 'ec': 'NH'},
  'NC': {'p':'5', 'ie': 'NM', 'ec': 'NH'},'ND': {'p':'5', 'ie': 'NM', 'ec': 'NH'},'MP': {'p':'5', 'ie': 'NM', 'ec': 'NH'},
  'OH': {'p':'5', 'ie': 'OH', 'ec': 'NH'},'OK': {'p':'6', 'ie': 'OH', 'ec': 'NH'},'OR': {'p':'6', 'ie': 'OH', 'ec': 'OR'},
  'PA': {'p':'6', 'ie': 'OH', 'ec': 'OR'},'PR': {'p':'6', 'ie': 'OH', 'ec': 'OR'},'RI': {'p':'6', 'ie': 'OH', 'ec': 'OR'},
  'SC': {'p':'6', 'ie': 'SC', 'ec': 'OR'},'SD': {'p':'6', 'ie': 'SC', 'ec': 'SD'},'TN': {'p':'6', 'ie': 'TN', 'ec': 'SD'},
  'TX': {'p':'7', 'ie': 'TN', 'ec': 'SD'},'UT': {'p':'7', 'ie': 'UT', 'ec': 'UT'},'VT': {'p':'7', 'ie': 'VT', 'ec': 'UT'},
  'VI': {'p':'7', 'ie': 'VT', 'ec': 'VI'},'VA': {'p':'8', 'ie': 'VT', 'ec': 'VI'},'WA': {'p':'8', 'ie': 'WA', 'ec': 'WA'},
  'WV': {'p':'8', 'ie': 'WA', 'ec': 'WA'},'WI': {'p':'8', 'ie': 'WA', 'ec': 'WA'},'WY': {'p':'8', 'ie': 'WA', 'ec': 'WA'},
} %}

<section id="section-1" role="tabpanel" aria-hidden="true" aria-labelledby="section-1-heading">
  <div class='container'>
    <h2 id="section-1-heading">Election data and reporting deadlines</h2>
    {% include 'partials/elections/election-profile-cards.jinja' %}
    {% if state == 'PA' and office == 'house' and cycle == 2018 %}
    <div class="message message--info">
        <p>On February 19, 2018, Pennsylvania's Supreme Court released a new congressional map for Pennsylvania. Some candidates subsequently amended their registration forms to reflect new district numbers. Candidates are listed using information from their registration forms and may be running in different districts than in the past.</p>
    </div>
    {% endif %}
    <div class="slab slab--inline slab--neutral u-padding--left u-padding--right">
      {{ select.election_cycle_select(cycles, cycle, 'summary') }}

      <div id="candidate-financial-totals" class="entity__figure row">
        <div class="heading--section heading--with-action u-no-margin">
          <h3 class="heading__left">Candidate financial totals</h3>
          <div class="heading__right">
            <span class="is-incumbent t-sans t-note" style="padding-right: 1em">Incumbent</span>
            <div
              class="message message--info message--mini t-left-aligned data-container__message"
              data-export-message-for="candidate-financial-totals"
              aria-hidden="false"
            >
              Exports coming soon.
            </div>
            <button
              type="button"
              class="js-export button button--cta button--export"
              data-export-for="candidate-financial-totals"
            >
              Export
            </button>
          </div>
        </div>
        <table
          class="data-table data-table--heading-borders scrollX"
          data-type="candidate-financial-totals"
        >
          <thead>
            <th role="col">Candidate</th>
            <th role="col">Party</th>
            <th role="col">Total receipts</th>
            <th role="col">Total disbursements</th>
            <th role="col">Cash on hand</th>
            <th role="col">Source reports</th>
          </thead>
        </table>
        <div class="datatable__note">
          <p class="t-note" style="margin-bottom: 1em">
            This table only shows candidates who have registered and filed a financial report. Information in this table may not include the most recently submitted filings.
          </p>
        </div>
        {% if cycle >= 2010 %}
          {% if anchors[state] %}
            {% set cp = '#anchor'+anchors[state]['p'] %}
          {% else %}
            {% set cp = '' %}
          {% endif %}
          {% if office == 'president' and cycle >= 2012 %}
            {{ reporting.info(
                'Presidential committee reports',
                'Quarterly / monthly filing and pre-/post-election reports',
                [{
                  'text': 'Reporting deadlines and notices',
                  'href': 'https://transition.fec.gov/info/report_dates_'+cycle|string+'.shtml'
                }]
              )
            }}
          {% else %}
            {{ reporting.info(
                'Congressional committee reports',
                'Quarterly filing and pre-/post-election reports',
                [{
                  'text': 'Convention and Primary deadlines',
                  'href': 'https://transition.fec.gov/info/charts_primary_dates_'+cycle|string+'.shtml'+cp
                },{
                  'text': 'General deadlines',
                  'href': 'https://transition.fec.gov/info/report_dates_'+cycle|string+'.shtml#general'
                }]
              )
            }}
          {% endif %}
        {% else %}
          {{ reporting.warning(cycle='2010') }}
        {% endif %}
      </div>

      <div id="individual-contributions" class="entity__figure row">
        <div class="heading--section heading--with-action">
          <h3 class="heading__left">Individual contributions to candidates</h3>
        </div>
        <div class="row u-padding--bottom">
          <fieldset class="toggles js-toggles">
            <legend class="label">Group by:</legend>
            <label for="toggle-size">
              <input id="toggle-size" type="radio" class="js-panel-toggle-control" name="election-aggregate" value="by-size" checked>
              <span class="button--alt">Contribution size</span>
            </label>
            <label for="toggle-state">
              <input id="toggle-state" type="radio" class="js-panel-toggle-control" name="election-aggregate" value="by-state">
              <span class="button--alt">Contributor state</span>
            </label>
          </fieldset>
        </div>

      <div id="comparison"></div>
        <div class="row">
          <div id="by-size" class="panel-toggle-element" aria-hidden="false">
            <div class="heading--section heading--with-action">
            </div>
            <table class="data-table data-table--heading-borders scrollX" data-type="by-size">
              <thead>
                <th scope="col">Candidate</th>
                <th scope="col">$200 and under</th>
                <th scope="col">$200.01—$499.99</th>
                <th scope="col">$500—$999.99</th>
                <th scope="col">$1,000—$1,999.99</th>
                <th scope="col">$2,000 and over</th>
              </thead>
            </table>
          </div>
        </div>

        <div class="row">
          <div id="by-state" class="panel-toggle-element" aria-hidden="true">
            <div class="results-info results-info--simple">
              <div class="js-toggles toggles toggles--small map-toggles" aria-label="Toggle view">
                <label for="toggle-table">
                  <input id="toggle-table" type="radio" class="js-panel-toggle-control" name="state-view" value="state-table" checked>
                  <span class="button--alt button--small button--table">Table</span>
                </label>
                <label for="toggle-map">
                  <input id="toggle-map" type="radio" class="js-panel-toggle-control" name="state-view" value="state-maps">
                  <span class="button--alt button--small button--map">Map</span>
                </label>
              </div>
            </div>
            <div id="state-table">
              <div class="slab heading--section heading--with-action">
              </div>
              <table class="data-table data-table--heading-borders scrollX panel-toggle-element" data-type="by-state" aria-hidden="false">
                <thead><tr></tr></thead>
              </table>
            </div>
            <div id="state-maps" class="panel-toggle-element" aria-hidden="true">
              <div class="choropleths row"></div>
              <div class="row">
                <div class="legend-container">
                  <span class="t-block">By state: total amount received</span>
                  <svg></svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="independent-expenditures" class="entity__figure row">
        <div class="heading--section heading--with-action u-no-margin">
          <h3 class="term heading__left" data-term="Independent expenditure">Independent expenditures</h3>
          <div class="heading__right">
            <div
              class="message message--info message--mini t-left-aligned data-container__message"
              data-export-message-for="independent-expenditures"
              aria-hidden="true"
            >
            </div>
            <button
              type="button"
              class="js-export button button--cta button--export"
              data-export-for="independent-expenditures"
            >
              Export
            </button>
          </div>
        </div>
        <table
          class="data-table data-table--heading-borders scrollX"
          data-type="independent-expenditures"
        >
          <thead>
            <th scope="col">Spent by</th>
            <th scope="col">Support/Oppose</th>
            <th scope="col">Candidate</th>
            <th scope="col">Aggregate amount</th>
          </thead>
        </table>
        <div class="datatable__note">
          <p class="t-note" style="margin-bottom: 1em">
            These totals are drawn from quarterly, monthly and semi-annual reports. <a href='/data/independent-expenditures/?data_type=processed&is_notice=true'>24- and 48-Hour Reports</a> of independent expenditures aren't included.
          </p>
        </div>
        {% if cycle >= 2010 %}
          {% if anchors[state] %}
            {% set ie = '#anchor'+anchors[state]['ie'] %}
          {% else %}
            {% set ie = '' %}
          {% endif %}
          {{ reporting.info(
              'Independent expenditure reports',
              '24- and 48-hour report periods',
              [{
                'text': 'Independent expenditure deadlines',
                'href': 'https://transition.fec.gov/info/charts_ie_dates_'+cycle|string+'.shtml'+ie,
              }]
            )
          }}
        {% else %}
          {{ reporting.warning(cycle='2010') }}
        {% endif %}
      </div>

      <div id="communication-costs" class="entity__figure row">
        <div class="heading--section heading--with-action u-no-margin">
          <h3 class="heading__left">Communication costs</h3>
          <div class="heading__right">
            <div
              class="message message--info message--mini t-left-aligned data-container__message"
              data-export-message-for="communication-costs"
              aria-hidden="true"
            >
            </div>
            <button
              type="button"
              class="js-export button button--cta button--export"
              data-export-for="communication-costs"
            >
              Export
            </button>
          </div>
        </div>
        <table
          class="data-table data-table--heading-borders scrollX"
          data-type="communication-costs"
        >
          <thead>
            <th scope="col">Spent by</th>
            <th scope="col">Support/Oppose</th>
            <th scope="col">Candidate</th>
            <th scope="col">Aggregate amount</th>
          </thead>
        </table>
      </div>

      <div id="electioneering-communication" class="entity__figure row">
        <div class="heading--section heading--with-action u-no-margin">
          <h3 class="term heading__left" data-term="Electioneering communication">Electioneering communications</h3>
          <div class="heading__right">
            <div
              class="message message--info message--mini t-left-aligned data-container__message"
              data-export-message-for="electioneering"
              aria-hidden="true"
            >
            </div>
            <button
              type="button"
              class="js-export button button--cta button--export"
              data-export-for="electioneering"
            >
              Export
            </button>
          </div>
        </div>
        <table
          class="data-table data-table--heading-borders scrollX"
          data-type="electioneering"
        >
          <thead>
            <th scope="col">Spent by</th>
            <th scope="col">Candidate</th>
            <th scope="col">Aggregate amount</th>
          </thead>
        </table>
        <div class="datatable__note">
          <p class="t-note" style="margin-bottom: 1em">
            To help users work with this data, we divide each itemized disbursement amount by the number of federal candidates named in connection with that disbursement. The resulting amount is listed here.
          </p>
        </div>
        {% if cycle >= 2010 %}
          {% if anchors[state] %}
            {% set ec = '#anchor'+anchors[state]['ec'] %}
          {% else %}
            {% set ec = '' %}
          {% endif %}
          {{ reporting.info(
                'Electioneering communication reports',
                '30- and 60-day report periods',
                [{
                  'text': 'Electioneering communication deadlines',
                  'href': 'https://transition.fec.gov/info/charts_ec_dates_'+cycle|string+'.shtml'+ec,
                }]
              )
            }}
        {% else %}
          {{ reporting.warning(cycle='2010') }}
        {% endif %}
      </div>
    </div>
  </div>
</section>
