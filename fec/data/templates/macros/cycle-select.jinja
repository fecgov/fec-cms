{% macro cycle_select(cycles, cycle=none, duration=2, location='query', id='cycle-select', class='', range=False) %}
{% set cycle = cycle | int %}
{% if cycles %}
  <div class="cycle-select js-cycle-select">
    <label for="{{ id }}" class="label cycle-select__label">Election</label>
    <select
        id="{{ id }}"
        class="{{ class }} js-cycle"
        name="cycle"
        data-cycle-location="{{ location }}"
        data-duration="{{ duration }}"
    >
    {% for each in cycles | sort(reverse=True) %}
        <option
          value="{{ each }}"
          {% if cycle and cycle <= each and cycle > (each - duration) %}selected{% endif %}
        >
        {% if range %}
          {{ each|fmt_year_range }}
        {% else %}
          {{ each }}
        {% endif %}
      </option>
    {% endfor %}
    </select>
  </div>
{% endif %}
{% endmacro %}

{% macro candidate_cycle_select(cycles, cycle=none, id='') %}
{% set cycle = cycle | int %}
  <div class="content__section">
    <label for="{{id}}-cycle" class="label cycle-select__label">Election</label>
    <select id="{{id}}-cycle" class="js-cycle" name="cycle" data-cycle-location="query" data-election-full="False">
      {% for each in cycles | sort(reverse=True) %}
        <option
            value="{{ each }}"
            {% if cycle and cycle <= each and cycle > (each - 2) %}selected{% endif %}
          >{{ each }}</option>
      {% endfor %}
    </select>
  </div>
{% endmacro %}

{% macro committee_cycle_select(cycles, cycle=none, id='') %}
{% set cycle = cycle | int %}
  <div class="row content__section">
    <div class="cycle-select">
      <label for="{{id}}-cycle" class="label cycle-select__label">Two-year period</label>
      <select id="{{id}}-cycle" class="js-cycle" name="cycle" data-cycle-location="query">
        {% for each in cycles | sort(reverse=True) %}
          <option
              value="{{ each }}"
              {% if cycle and cycle <= each and cycle > (each - 2) %}selected{% endif %}
            >{{ each|fmt_year_range }}</option>
        {% endfor %}
      </select>
    </div>
  </div>
{% endmacro %}

{% macro election_cycle_select(cycles, cycle=none, id='') %}
{% set cycle = cycle | int %}
  <div class="row content__section">
    <div class="cycle-select">
      <label for="{{id}}-cycle" class="label cycle-select__label">Two-year period</label>
      <select id="{{id}}-cycle" class="js-cycle" name="cycle" data-cycle-location="path">
        {% for cycle_value in cycles | sort(reverse=True) %}
          {% if cycle_value <= 2018 %}
            <option
              value="{{ cycle_value }}"
              {% if cycle and cycle <= cycle_value and cycle > (cycle_value - 2) %}selected{% endif %}
            >{{ cycle_value|fmt_year_range }}</option>
          {% endif %}
        {% endfor %}
      </select>
    </div>
  </div>
{% endmacro %}
